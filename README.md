# Развертывание проекта

Прежде всего, убедитесь, что на устройстве установлен `Docker`, рекомендуем последнею версию `^27.0.0`.

    Конфигурирование переменных окружения `.env` - необходимо продублировать шаблон `.env.dist` из корневого каталога.

## Запуск среды разработки: `development`
Для версии dev настройки контейнеров Docker позволяют удобно и быстро запускать приложение в различных окружениях.

### 1. Инициализировать сборку контейнеров

Запустить сборку Docker-контейнеров разработки:

```shell
docker-compose up -d --build
```

### 2. Скачивание зависимостей

```shell
docker compose exec dev-node npm install
```

### 3. Запуск локального vite сервера разработки

Запустите локальный сервер разработчика, выполнив команду:

```shell
    docker compose exec dev-client npm run dev
```
По умолчанию сервер разработки инициализируется на порту 3000 и будет доступен по адресу [http://localhost:3000](http://localhost:3000).

## Запуск среды развертывания: `production`
Для версии prod, настроен набор Docker контейнеров, которые включает обратное проксирование и генерацию ssl сертификата для Nginx.

### 1. Генерация ssl сертификатов

Открываем полученный `docker/letsencrypt/init.sh` и вписываем:
- `domains` - вместо example.com свои домены через пробел
- `email` - Действительный email адрес для авторизации certbot.
- `data_path` - меняем пути, если меняли их в папке.
- `staging` - временно ставим 1 (для теста)

Достаточно указать корректное доменное имя публичного сервера, подкорректировав переменную `domains`.
Сначала выполнить скрипт с переменной `staging=1`, для тестового режима. Когда скрипт удачно отработает, можно изменять состояние `staging=0` и выписывать действительный сертификат.

Для выписки сертификатов подлинности ресурса, необходимо выполнить bash-скрипт:

```shell
sudo bash docker/letsencrypt/init.sh
```

Важно! При отсутствии ssl сертификатов, nginx-серверу не удастся запуститься.

### 2. Сборка и запуск проекта

Файл `docker-compose.prod.yaml`, содержит настроенный файл сборки проекта

```shell
docker compose -f docker-compose.prod.yaml up -d --build
```

Команда сформирует производственную сборку проекта и сконфигурирует nginx для отображения статических файлов приложение React
в Docker-контейнере, и сделает его доступным по портам 80 и 443.



## Полезные ресурсы

В проекте используется утилита `Docker` для создания виртуального окружения в контексте контейнерах.
Это помогает создавать универсальное окружение для разработки, тестирования и развертывания приложения на различных машинах.
