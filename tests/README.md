## Запуск тестов

Для запуска тестов доступны 4 команды в `package.json`:

- `test:unit` - запускает Jest в интерактивном режиме для просмотра и выполнения тестов.
  - По умолчанию запускаются тесты, связанные с файлами, измененными с момента последней фиксации.
- `test:watch` - запускает Jest в режиме отслеживания изменений файлов для автоматического выполнения тестов при изменении файлов.
  - При использовании Git, Jest отслеживает изменения файлов, которые отслеживает Git, поэтому если в файле тестов не было изменений из Git, то он больше не будет отображаться в режиме просмотра после коммита.
- `test:coverage` - запускает Jest в режиме отслеживания изменений файлов с отображением покрытия кода тестами.
  - В терминале отображается таблица с покрытием тестами измененных файлов.
  - Результаты покрытия сохраняются в папку `__tests__/_coverage`.
- `test:report` - запускает Jest для экспорта отчета с покрытием тестами файлов.
  - В терминале отображается таблица с покрытием тестами измененных файлов.
  - Результаты покрытия сохраняются в папку `__tests__/_coverage`.

### Тестирование отдельного файла или директории

Необходимо добавить путь до файла или директории к описанным командам, например:

```shell
npm run test:unit utils/collection/Collection.test.js
npm run test:coverage utils/collection/Collection.test.js
npm run test:report utils/collection/Collection.test.js
```

## Структура тестов

В приложении тесты следует организовывать следующим образом:

- Тесты следует писать в каталоге `__tests__`.
- Структура именования каталогов должна копировать структуру основного приложения.
- Имена файлов с тестами должны иметь постфикс `.test` (или `.spec`) перед расширением файла.
- Данные для тестов следует хранить в каталоге `_tests/_mocks`.
  Для обращения к этим данным можно использовать алиас `@/mocks/`.

## Отладка тестов в PhpStorm и WebStorm

Для отладки тестов необходимо выполнить несколько шагов настройки в редакторе кода:

1. Открыть окно редактирования конфигураций запуска (`Run` -> `Edit configurations`).
2. Добавить новую конфигурацию для запуска Jest:
   - Нажать кнопку `+`.
   - Выбрать `Jest`.
3. Настроить опции:
   - `Configuration file` указывает на путь до файла конфигурации Jest (`jest.config.js`).
   - Если используется `nvm`, рекомендуется использовать `NodeJS 14` и `npm 6`.
     (Примечание: при использовании версий `npm >7` может возникнуть проблема с переменной окружения `$PATH`.)
   - `Jest package` - путь до Jest (лежит в `node_modules`).
   - `Working directory` - путь к общей папке проекта (`/`).
   - Поставить галочку на `All tests`.
4. Теперь доступно возможность отлаживать тесты, устанавливая точки останова и запуская их, нажимая на значок жучка в редакторе кода.

## Документация

Для написания тестов необходимо обратиться к следующей документации:

[Jest](https://jestjs.io/) - это фреймворк для тестов, используемый для тестирования JavaScript-кода на клиенте и на сервере.
Он предоставляет различные инструменты для создания и запуска тестов, включая функции для мокирования, снимков и анализа покрытия.

[Testing Library](https://testing-library.com/) - это библиотека для тестирования пользовательского интерфейса,
используемая в связке с Jest. Она предоставляет набор утилит для рендеринга компонентов, взаимодействия с ними и проверки их состояния.

[jest-dom](https://github.com/testing-library/jest-dom) - это расширение для Jest, предоставляющее дополнительные матчеры
для проверки рендеров компонентов. Оно включает в себя широкий набор матчеров, таких как `toHaveTextContent`, `toBeInTheDocument` и `toHaveStyle`.
